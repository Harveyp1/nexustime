<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexusTime - Timesheets</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ... (Keep existing styles) */
        .nav-link { display: flex; align-items: center; padding: 0.5rem 1rem; border-radius: 0.5rem; transition: background-color 0.2s; }
        .nav-link:hover, .nav-link.active { background-color: #374151; color: #34D399; }
        .nav-link svg { margin-right: 0.75rem; }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- Header -->
    <header class="header sticky top-0 z-40">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <a href="app.html" class="flex-shrink-0">
                        <img src="https://raw.githubusercontent.com/Harveyp1/nexustime/main/nexustimelogo.png" alt="NexusTime Logo" class="h-10" onerror="this.onerror=null; this.src='https://placehold.co/160x40/111827/34D399?text=NexusTime';">
                    </a>
                </div>
                <div class="hidden md:block">
                    <nav id="app-nav-desktop" class="ml-10 flex items-baseline space-x-4">
                        <!-- Desktop Nav Links will be injected here -->
                    </nav>
                </div>
                 <div class="hidden md:block">
                    <button id="logout-button-desktop" class="secondary-button px-4 py-2 rounded-lg text-sm font-medium">Log Out</button>
                </div>
                <div class="-mr-2 flex md:hidden">
                    <button id="mobile-menu-button" type="button" class="bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile menu, show/hide based on menu state. -->
        <div class="md:hidden hidden" id="mobile-menu">
            <nav id="app-nav-mobile" class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                 <!-- Mobile Nav Links will be injected here -->
            </nav>
            <div class="pt-4 pb-3 border-t border-gray-700">
                <div class="px-2">
                    <button id="logout-button-mobile" class="w-full text-left secondary-button px-4 py-2 rounded-lg text-sm font-medium">Log Out</button>
                </div>
            </div>
        </div>
    </header>

    <main id="main-content" class="hidden">
        <!-- ... (Rest of the main content remains the same) -->
    </main>
    
    <!-- ... (Modals and loading container remain the same) -->
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore, doc, getDoc, collection, query, getDocs, addDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // ... (Firebase config and global state remain the same)

        // --- Authentication & Initial Load ---
        // ... (onAuthStateChanged and loadInitialData remain the same)
        
        // --- UI & Rendering ---
        const showToast = (message, type = 'success') => { /* ... */ };

        function updateNav() {
            const navContainerDesktop = document.getElementById('app-nav-desktop');
            const navContainerMobile = document.getElementById('app-nav-mobile');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const logoutButtonDesktop = document.getElementById('logout-button-desktop');
            const logoutButtonMobile = document.getElementById('logout-button-mobile');
            
            if (currentUser) {
                mobileMenuButton.style.display = 'inline-flex';
                logoutButtonDesktop.style.display = 'inline-flex';

                let navLinks = [
                    { href: 'app.html', label: 'Dashboard', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" /></svg>' },
                    { href: 'timesheet.html', label: 'Timesheets', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" /></svg>' },
                    { href: 'schedule.html', label: 'Schedule', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" /></svg>' },
                    { href: 'app.html#manage', label: 'Manage', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" /></svg>' },
                    { href: 'settings.html', label: 'Settings', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" /></svg>' },
                ];
                
                const linksHtml = navLinks.map(link => {
                    const isActive = window.location.pathname.endsWith(link.href);
                    return `<a href="${link.href}" class="nav-link text-gray-300 hover:text-white ${isActive ? 'active' : ''}">
                        ${link.icon}<span>${link.label}</span>
                    </a>`;
                }).join('');

                navContainerDesktop.innerHTML = linksHtml;
                navContainerMobile.innerHTML = linksHtml;

                logoutButtonDesktop.addEventListener('click', () => signOut(auth));
                logoutButtonMobile.addEventListener('click', () => signOut(auth));
                mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            }
        }
        
        // ... (The rest of the timesheet.html JavaScript logic remains the same)
    </script>
</body>
</html>